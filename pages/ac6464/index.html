<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>reactç»„ä»¶ | Wsh&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/images/logo.png">
    <meta name="description" content="ç»å¸¸å·æ‡’ï¼Œå¶å°”æ›´æ–°çš„">
    
    <link rel="preload" href="/assets/css/0.styles.bc63fb2f.css" as="style"><link rel="preload" href="/assets/js/app.e947a2e7.js" as="script"><link rel="preload" href="/assets/js/2.dc8a2400.js" as="script"><link rel="preload" href="/assets/js/54.2e5a3401.js" as="script"><link rel="prefetch" href="/assets/js/10.0b1da748.js"><link rel="prefetch" href="/assets/js/11.8e999e9c.js"><link rel="prefetch" href="/assets/js/12.d98e8047.js"><link rel="prefetch" href="/assets/js/13.a19f7b3e.js"><link rel="prefetch" href="/assets/js/14.bc46e720.js"><link rel="prefetch" href="/assets/js/15.77a7cb2e.js"><link rel="prefetch" href="/assets/js/16.45f3798f.js"><link rel="prefetch" href="/assets/js/17.65043558.js"><link rel="prefetch" href="/assets/js/18.60c02aca.js"><link rel="prefetch" href="/assets/js/19.f6f74a85.js"><link rel="prefetch" href="/assets/js/20.fb7a117c.js"><link rel="prefetch" href="/assets/js/21.bf9c4a2f.js"><link rel="prefetch" href="/assets/js/22.f61b5f3f.js"><link rel="prefetch" href="/assets/js/23.8a720082.js"><link rel="prefetch" href="/assets/js/24.ccbdb665.js"><link rel="prefetch" href="/assets/js/25.efcad5ae.js"><link rel="prefetch" href="/assets/js/26.dfd6a6f6.js"><link rel="prefetch" href="/assets/js/27.0a7cd79f.js"><link rel="prefetch" href="/assets/js/28.00b295c6.js"><link rel="prefetch" href="/assets/js/29.34f094d2.js"><link rel="prefetch" href="/assets/js/3.23e0fc9b.js"><link rel="prefetch" href="/assets/js/30.9e4742ce.js"><link rel="prefetch" href="/assets/js/31.a1e478a3.js"><link rel="prefetch" href="/assets/js/32.9dbcab01.js"><link rel="prefetch" href="/assets/js/33.f33026f3.js"><link rel="prefetch" href="/assets/js/34.65d50d6f.js"><link rel="prefetch" href="/assets/js/35.fb16738c.js"><link rel="prefetch" href="/assets/js/36.c4a7ff97.js"><link rel="prefetch" href="/assets/js/37.7ec40316.js"><link rel="prefetch" href="/assets/js/38.7469dc6a.js"><link rel="prefetch" href="/assets/js/39.6f4ca190.js"><link rel="prefetch" href="/assets/js/4.c704e751.js"><link rel="prefetch" href="/assets/js/40.51e51c93.js"><link rel="prefetch" href="/assets/js/41.5900a31e.js"><link rel="prefetch" href="/assets/js/42.a252892c.js"><link rel="prefetch" href="/assets/js/43.b3f0edd6.js"><link rel="prefetch" href="/assets/js/44.958cf58c.js"><link rel="prefetch" href="/assets/js/45.4b3d0faa.js"><link rel="prefetch" href="/assets/js/46.b98ec317.js"><link rel="prefetch" href="/assets/js/47.4f709b5a.js"><link rel="prefetch" href="/assets/js/48.49f6f150.js"><link rel="prefetch" href="/assets/js/49.21c14213.js"><link rel="prefetch" href="/assets/js/5.2db75e05.js"><link rel="prefetch" href="/assets/js/50.e541e900.js"><link rel="prefetch" href="/assets/js/51.d67ff266.js"><link rel="prefetch" href="/assets/js/52.a1f4c220.js"><link rel="prefetch" href="/assets/js/53.307f45fa.js"><link rel="prefetch" href="/assets/js/55.3eec9d65.js"><link rel="prefetch" href="/assets/js/56.2f46988a.js"><link rel="prefetch" href="/assets/js/57.c2dc6634.js"><link rel="prefetch" href="/assets/js/58.c363b0ba.js"><link rel="prefetch" href="/assets/js/59.21b28039.js"><link rel="prefetch" href="/assets/js/6.9073f8bb.js"><link rel="prefetch" href="/assets/js/60.369be21b.js"><link rel="prefetch" href="/assets/js/61.ba1c7c56.js"><link rel="prefetch" href="/assets/js/62.50eb3244.js"><link rel="prefetch" href="/assets/js/63.f6aef6a2.js"><link rel="prefetch" href="/assets/js/64.f0f8e740.js"><link rel="prefetch" href="/assets/js/65.a1b05e03.js"><link rel="prefetch" href="/assets/js/66.cbbd6786.js"><link rel="prefetch" href="/assets/js/67.fca809e1.js"><link rel="prefetch" href="/assets/js/68.83a7702e.js"><link rel="prefetch" href="/assets/js/69.ccd9e7f9.js"><link rel="prefetch" href="/assets/js/7.6922c449.js"><link rel="prefetch" href="/assets/js/70.6be8b1bf.js"><link rel="prefetch" href="/assets/js/71.4d664b96.js"><link rel="prefetch" href="/assets/js/72.e32651ee.js"><link rel="prefetch" href="/assets/js/73.bf55aa84.js"><link rel="prefetch" href="/assets/js/74.f33ef55f.js"><link rel="prefetch" href="/assets/js/75.82e1159c.js"><link rel="prefetch" href="/assets/js/76.e22ff448.js"><link rel="prefetch" href="/assets/js/77.556fc7e8.js"><link rel="prefetch" href="/assets/js/78.35d531d9.js"><link rel="prefetch" href="/assets/js/79.be7b54f4.js"><link rel="prefetch" href="/assets/js/8.922b3edf.js"><link rel="prefetch" href="/assets/js/80.297f19ce.js"><link rel="prefetch" href="/assets/js/81.30215707.js"><link rel="prefetch" href="/assets/js/82.00f77924.js"><link rel="prefetch" href="/assets/js/83.40e4eec1.js"><link rel="prefetch" href="/assets/js/84.bcf6db6c.js"><link rel="prefetch" href="/assets/js/85.e2b0e4cf.js"><link rel="prefetch" href="/assets/js/86.eb24944b.js"><link rel="prefetch" href="/assets/js/87.a6c9eb63.js"><link rel="prefetch" href="/assets/js/88.66d10613.js"><link rel="prefetch" href="/assets/js/9.c1b7ec7e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.bc63fb2f.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="ç›®å½•" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/images/1.gif" alt="Wsh's blog" class="logo"> <span class="site-name can-hide">Wsh's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">é¦–é¡µ</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="AIGC" class="dropdown-title"><a href="/aiAgent/" class="link-title">AIGC</a> <span class="title" style="display:none;">AIGC</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/aiAgent/bacis/" class="nav-link">AgentåŸºç¡€</a></li><li class="dropdown-item"><!----> <a href="/aiAgent/design/" class="nav-link">Agentè®¾è®¡æ¨¡å¼</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="harmonyOS" class="dropdown-title"><a href="/harmonyOS/" class="link-title">harmonyOS</a> <span class="title" style="display:none;">harmonyOS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/harmonyOS/base/" class="nav-link">åŸºç¡€çŸ¥è¯†</a></li><li class="dropdown-item"><!----> <a href="/harmonyOS/ArkUI/" class="nav-link">ArkUI</a></li><li class="dropdown-item"><!----> <a href="/harmonyOS/UIAbility/" class="nav-link">UIAbility</a></li><li class="dropdown-item"><!----> <a href="/harmonyOS/state/" class="nav-link">ç»„ä»¶é€šä¿¡æ–¹å¼</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="çŸ¥è¯†ğŸ‘–" class="dropdown-title"><a href="/note/" class="link-title">çŸ¥è¯†ğŸ‘–</a> <span class="title" style="display:none;">çŸ¥è¯†ğŸ‘–</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/cache/" class="nav-link">å‰ç«¯ç¼“å­˜</a></li><li class="dropdown-item"><!----> <a href="/note/react/" class="nav-link">React</a></li><li class="dropdown-item"><!----> <a href="/note/typescript/" class="nav-link">typescript</a></li><li class="dropdown-item"><!----> <a href="/note/javascript/" class="nav-link">javascript</a></li><li class="dropdown-item"><!----> <a href="/note/flutter/" class="nav-link">flutter</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å·¥ç¨‹ğŸŒ¹" class="dropdown-title"><a href="/tool/" class="link-title">å·¥ç¨‹ğŸŒ¹</a> <span class="title" style="display:none;">å·¥ç¨‹ğŸŒ¹</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tool/node/" class="nav-link">node</a></li><li class="dropdown-item"><!----> <a href="/tool/webpack/" class="nav-link">webpack</a></li></ul></div></div><div class="nav-item"><a href="/web3D/" class="nav-link">web3DğŸ˜‰</a></div><div class="nav-item"><a href="/pages/library/" class="nav-link">å®åº“ğŸ“°</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ç´¢å¼•ğŸ”’" class="dropdown-title"><a href="/archives/" class="link-title">ç´¢å¼•ğŸ”’</a> <span class="title" style="display:none;">ç´¢å¼•ğŸ”’</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">åˆ†ç±»</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">æ ‡ç­¾</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">å½’æ¡£</a></li></ul></div></div><div class="nav-item"><a href="https://blog.fudenglong.site" target="_blank" rel="noopener noreferrer" class="nav-link external">
  é¾™å“¥çš„å¤§ğŸ‚ä¹‹è·¯
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/wshuhua" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/images/avatar.gif"> <div class="blogger-info"><h3>wsh</h3> <span>äººæœªè€ï¼Œæƒ³å…»è€</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">é¦–é¡µ</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="AIGC" class="dropdown-title"><a href="/aiAgent/" class="link-title">AIGC</a> <span class="title" style="display:none;">AIGC</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/aiAgent/bacis/" class="nav-link">AgentåŸºç¡€</a></li><li class="dropdown-item"><!----> <a href="/aiAgent/design/" class="nav-link">Agentè®¾è®¡æ¨¡å¼</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="harmonyOS" class="dropdown-title"><a href="/harmonyOS/" class="link-title">harmonyOS</a> <span class="title" style="display:none;">harmonyOS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/harmonyOS/base/" class="nav-link">åŸºç¡€çŸ¥è¯†</a></li><li class="dropdown-item"><!----> <a href="/harmonyOS/ArkUI/" class="nav-link">ArkUI</a></li><li class="dropdown-item"><!----> <a href="/harmonyOS/UIAbility/" class="nav-link">UIAbility</a></li><li class="dropdown-item"><!----> <a href="/harmonyOS/state/" class="nav-link">ç»„ä»¶é€šä¿¡æ–¹å¼</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="çŸ¥è¯†ğŸ‘–" class="dropdown-title"><a href="/note/" class="link-title">çŸ¥è¯†ğŸ‘–</a> <span class="title" style="display:none;">çŸ¥è¯†ğŸ‘–</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/cache/" class="nav-link">å‰ç«¯ç¼“å­˜</a></li><li class="dropdown-item"><!----> <a href="/note/react/" class="nav-link">React</a></li><li class="dropdown-item"><!----> <a href="/note/typescript/" class="nav-link">typescript</a></li><li class="dropdown-item"><!----> <a href="/note/javascript/" class="nav-link">javascript</a></li><li class="dropdown-item"><!----> <a href="/note/flutter/" class="nav-link">flutter</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å·¥ç¨‹ğŸŒ¹" class="dropdown-title"><a href="/tool/" class="link-title">å·¥ç¨‹ğŸŒ¹</a> <span class="title" style="display:none;">å·¥ç¨‹ğŸŒ¹</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tool/node/" class="nav-link">node</a></li><li class="dropdown-item"><!----> <a href="/tool/webpack/" class="nav-link">webpack</a></li></ul></div></div><div class="nav-item"><a href="/web3D/" class="nav-link">web3DğŸ˜‰</a></div><div class="nav-item"><a href="/pages/library/" class="nav-link">å®åº“ğŸ“°</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ç´¢å¼•ğŸ”’" class="dropdown-title"><a href="/archives/" class="link-title">ç´¢å¼•ğŸ”’</a> <span class="title" style="display:none;">ç´¢å¼•ğŸ”’</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">åˆ†ç±»</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">æ ‡ç­¾</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">å½’æ¡£</a></li></ul></div></div><div class="nav-item"><a href="https://blog.fudenglong.site" target="_blank" rel="noopener noreferrer" class="nav-link external">
  é¾™å“¥çš„å¤§ğŸ‚ä¹‹è·¯
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/wshuhua" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span> reactåŸºç¡€</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/7f8c4f/" class="sidebar-link">reactå·¥å…·API</a></li><li><a href="/pages/ac6464/" aria-current="page" class="active sidebar-link">reactç»„ä»¶</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/826d29/" class="sidebar-link">reactç”Ÿå‘½å‘¨æœŸ</a></li><li><a href="/pages/8aaed3/" class="sidebar-link">react äº‹ä»¶æœºåˆ¶</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span> reactæ›´æ–°ç‰¹æ€§</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span> reactè¿›é˜¶</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper bg-style-6"><div class="articleInfo-wrap" data-v-0c557b5e><div class="articleInfo" data-v-0c557b5e><ul class="breadcrumbs" data-v-0c557b5e><li data-v-0c557b5e><a href="/" title="é¦–é¡µ" class="iconfont icon-home router-link-active" data-v-0c557b5e></a></li> <li data-v-0c557b5e><a href="/note/react/#react" data-v-0c557b5e>react</a></li><li data-v-0c557b5e><a href="/note/react/# reactåŸºç¡€" data-v-0c557b5e> reactåŸºç¡€</a></li></ul> <div class="info" data-v-0c557b5e><!----> <div title="åˆ›å»ºæ—¶é—´" class="date iconfont icon-riqi" data-v-0c557b5e><a href="javascript:;" data-v-0c557b5e>2022-02-07</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">ç›®å½•</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">reactç»„ä»¶<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h3 id="_01-component"><a href="#_01-component" class="header-anchor">#</a> 01. Component</h3> <p>packages/react/src/ReactBaseClasses.js</p> <div class="language- extra-class"><pre class="language-text"><code>// ç”¨äºæ›´æ–°ç»„ä»¶çŠ¶æ€çš„åŸºç±»å¸®åŠ©ç¨‹åº
function Component(props, context, updater) {
  this.props = props;
  this.context = context;
  // If a component has string refs, we will assign a different object later.
  this.refs = emptyObject; // å¦‚æœä¸€ä¸ªç»„ä»¶æœ‰å­—ç¬¦ä¸²å¼•ç”¨ï¼Œåé¢æŒ‡å®šä¸€ä¸ªä¸åŒçš„å¯¹è±¡ã€‚
  this.updater = updater || ReactNoopUpdateQueue; // updater å¯¹è±¡ä¸Šä¿å­˜ç€æ›´æ–°ç§Ÿé‡‘çš„æ–¹æ³•
}

Component.prototype.setState = function(partialState, callback) {
  this.updater.enqueueSetState(this, partialState, callback, 'setState');
};

Component.prototype.forceUpdate = function(callback) {
  this.updater.enqueueForceUpdate(this, callback, 'forceUpdate');
};
</code></pre></div><ul><li>Component åº•å±‚ React çš„å¤„ç†é€»è¾‘æ˜¯: ç±»ç»„ä»¶æ‰§è¡Œæ„é€ å‡½æ•°è¿‡ç¨‹ä¸­ä¼šåœ¨å®ä¾‹ä¸Šç»‘å®š props å’Œ context ï¼Œåˆå§‹åŒ–ç½®ç©º refs å±æ€§ï¼ŒåŸå‹é“¾ä¸Šç»‘å®šsetStateã€forceUpdate æ–¹æ³•ã€‚å¯¹äº updaterï¼ŒReact åœ¨å®ä¾‹åŒ–ç±»ç»„ä»¶ä¹‹åä¼šå•ç‹¬ç»‘å®š update å¯¹è±¡.</li></ul> <p>æ‰€ä»¥è¯´ ä¸ºä»€ä¹ˆè°ƒç”¨ super(props)ï¼Œç”±æ­¤è€Œæ¥ã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>constructor(){
    super()
    console.log(this.props) // æ‰“å° undefined ä¸ºä»€ä¹ˆ?
}
</code></pre></div><p>ç»‘å®š props æ˜¯åœ¨çˆ¶ç±» Component æ„é€ å‡½æ•°ä¸­ï¼Œæ‰§è¡Œ super ç­‰äºæ‰§è¡Œ Component å‡½æ•°ï¼Œæ­¤æ—¶ props æ²¡æœ‰ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ ç»™ super() ï¼Œåœ¨ Component ä¸­å°±ä¼šæ‰¾ä¸åˆ° props å‚æ•°ï¼Œä»è€Œå˜æˆ undefinedã€‚</p> <ul><li>è°ƒç”¨superçš„åŸå› ï¼šåœ¨ES6ä¸­ï¼Œåœ¨å­ç±»çš„constructorä¸­å¿…é¡»å…ˆè°ƒç”¨superæ‰èƒ½å¼•ç”¨this</li> <li>super(props)çš„ç›®çš„ï¼šåœ¨constructorä¸­å¯ä»¥ä½¿ç”¨this.props</li></ul> <p>å¦‚ä½•è¢«å®ä¾‹åŒ–ï¼Ÿæºç å¦‚ä¸‹ï¼š</p> <p>packages/react-reconciler/src/ReactFiberClassComponent.new.js</p> <div class="language- extra-class"><pre class="language-text"><code>function constructClassInstance (workInProgress, ctor, props) {
    ...
    let instance = new ctor(props, context);
    adoptClassInstance(workInProgress, instance);
    ...
}
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>function adoptClassInstance(workInProgress, instance) {
  instance.updater = classComponentUpdater;
}
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>const classComponentUpdater = {
  isMounted,
  enqueueSetState(inst, payload, callback) {
    // setState è§¦å‘
  }
  enqueueReplaceState(inst, payload, callback) {
    // replaceState è§¦å‘
    update.tag = ReplaceState;
  }
  enqueueForceUpdate(inst, payload, callback) {
    // forceUpdate è§¦å‘
    update.tag = ForceUpdate;
  }
}
</code></pre></div><p>enqueueSetState/enqueueReplaceState/enqueueForceUpdate å®ç°æ–¹å¼åŸºæœ¬ä¸€è‡´</p> <ol><li>æ›´æ–°è¿‡æœŸæ—¶é—´</li> <li>åˆ›å»ºUpdateå¯¹è±¡</li> <li>ä¸ºupdateå¯¹è±¡ç»‘å®šä¸€äº›å±æ€§ï¼Œæ¯”å¦‚ tag ã€callback</li> <li>åˆ›å»ºçš„updateå¯¹è±¡å…¥é˜Ÿ (enqueueUpdate)</li> <li>è¿›å…¥è°ƒåº¦è¿‡ç¨‹</li></ol> <h3 id="_02-purecomponent"><a href="#_02-purecomponent" class="header-anchor">#</a> 02. PureComponent</h3> <p>PureComponent å’ŒComponentç”¨æ³•å·®ä¸å¤šï¼Œå”¯ä¸€ä¸åŒçš„æ˜¯ï¼Œçº¯ç»„ä»¶PureComponentä¼šè¿›è¡Œæµ…æ¯”è¾ƒï¼Œprops å’Œstateæ˜¯å¦ç›¸åŒæ˜¯å¦é‡æ–°æ¸²æŸ“ç»„ä»¶ã€‚ä¸€èˆ¬ç”¨äºäºæ€§èƒ½ä¼˜åŒ–ï¼Œå‡å°‘renderæ¬¡æ•°ã€‚å¦‚æœå¯¹è±¡åŒ…å«å¤æ‚çš„æ•°æ®ç»“æ„(æ¯”å¦‚å¯¹è±¡å’Œæ•°ç»„)ï¼Œä¼šæµ…æ¯”è¾ƒï¼Œå¦‚æœæ·±å±‚æ¬¡çš„æ”¹å˜ï¼Œæ˜¯æ— æ³•ä½œå‡ºåˆ¤æ–­çš„ï¼ŒReact.PureComponent è®¤ä¸ºæ²¡æœ‰å˜åŒ–ï¼Œè€Œæ²¡æœ‰æ¸²æŸ“è¯•å›¾ã€‚æˆ‘ä»¬å¯ä»¥å€ŸåŠ©äºimmetable.js,æé«˜å¯¹è±¡çš„æ¯”è¾ƒæ€§èƒ½,ç”¨ immetable.js é…åˆ shouldComponentUpdate æˆ–è€… react.memoæ¥ä½¿ç”¨, é€šè¿‡immetable.jsé‡Œé¢æä¾›çš„ is æ–¹æ³•æ¥åˆ¤æ–­ï¼Œå‰åå¯¹è±¡æ•°æ®ç±»å‹æ˜¯å¦å‘ç”Ÿå˜åŒ–</p> <div class="language- extra-class"><pre class="language-text"><code>import React, { PureComponent } from &quot;react&quot;;
class Index extends PureComponent {
  constructor(props) {
    super(props);
    this.state = {
      user: {
        name: &quot;wsh&quot;,
        age: 18,
      }
    };
    this.handerClick = this.handerClick.bind(this);
  }
  handerClick = () =&gt; {
    const { user } = this.state;
    user.age++;
    // this.setState({ user: {...user} });
    this.setState({ user }); // ä¸æ›´æ–°çš„åŸå› ï¼šä¸¤æ¬¡userå¯¹è±¡ï¼Œéƒ½æŒ‡å‘åŒä¸€ä¸ªuser,æ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼Œæ‰€ä»¥ä¸æ›´æ–°è§†å›¾
  };
  render() {
    const { user } = this.state;
    return (
      &lt;div&gt;
        &lt;div&gt;
          name: {user.name}
          age: {user.age}
        &lt;/div&gt;
        &lt;button onClick={this.handerClick}&gt;ç‚¹å‡»&lt;/button&gt;
      &lt;/div&gt;
    );
  }
}

export default Index;
</code></pre></div><h3 id="_03-memo"><a href="#_03-memo" class="header-anchor">#</a> 03. memo</h3> <ul><li><p>React.memo ä¸PureComponentä½œç”¨ç±»ä¼¼ï¼Œå¯ä»¥ç”¨ä½œæ€§èƒ½ä¼˜åŒ–.</p></li> <li><p>React.memo æ˜¯é«˜é˜¶ç»„ä»¶ï¼Œå‡½æ•°ç»„ä»¶å’Œç±»ç»„ä»¶éƒ½å¯ä»¥ä½¿ç”¨,PureComponentæ˜¯ åªèƒ½ç”¨ä½œç±»ç»„ä»¶</p></li> <li><p>React.memoåªèƒ½å¯¹propsçš„æƒ…å†µç¡®å®šæ˜¯å¦æ¸²æŸ“ï¼Œè€ŒPureComponentæ˜¯é’ˆå¯¹propså’Œstate</p></li> <li><p>React.memo([ç»„ä»¶æœ¬èº«],param)ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯åŸå§‹ç»„ä»¶æœ¬èº«ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯é€šè¿‡å¯¹æ¯”propsæ˜¯å¦ç›¸ç­‰æ¥å¯¹æ¯”æ˜¯å¦æ¸²æŸ“ï¼ˆpreï¼Œnextï¼‰=&gt; { return true or false } ä¸shouldComponentUpdate ç›¸åï¼Œè¿”å›trueï¼Œè¯´æ˜propsæ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œä¸æ¸²æŸ“ï¼Œè¿”å›false é€‰æ‹©ç»„ä»¶</p> <p>React.memo: ç¬¬äºŒä¸ªå‚æ•° è¿”å› true ç»„ä»¶ä¸æ¸²æŸ“ ï¼Œ è¿”å› false ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚
shouldComponentUpdate: è¿”å› true ç»„ä»¶æ¸²æŸ“ ï¼Œ è¿”å› false ç»„ä»¶ä¸æ¸²æŸ“ã€‚</p></li></ul> <p>React.memoåœ¨ä¸€å®šç¨‹åº¦ä¸Šï¼Œç­‰ä»·äºåœ¨ç»„ä»¶å¤–éƒ¨ä½¿ç”¨shouldComponentUpdateï¼Œç”¨äºæ‹¦æˆªæ–°è€propsï¼Œç¡®å®šç»„ä»¶æ˜¯å¦æ›´æ–°ã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>import React, { Component, memo } from &quot;react&quot;;

function TextMemo(props) {
  console.log(&quot;å­ç»„ä»¶æ¸²æŸ“&quot;);
  if (props) {
    return &lt;div&gt;hello react&lt;/div&gt;;
  }
}
const controllIsRender = (pre, next) =&gt; {
  if (pre.age === next.age) {
    return true;
  } else if (next.age &gt; 5) {
    return true;
  } else {
    return false;
  }
};
const NewMemo = memo(TextMemo, controllIsRender);

class Index extends Component {
  constructor(props) {
    super(props);
    this.state = {
      count: 1,
      age: 1,
    };
  }
  render() {
    const { count, age } = this.state;
    return (
      &lt;div&gt;
        &lt;div&gt;
          æ”¹å˜countï¼šå½“å‰å€¼ {count}
          &lt;button onClick={() =&gt; this.setState({ count: count + 1 })}&gt;count++&lt;/button&gt;
          &lt;button onClick={() =&gt; this.setState({ count: count - 1 })}&gt;count--&lt;/button&gt;
        &lt;/div&gt;
        &lt;div&gt;
          æ”¹å˜ageï¼šå½“å‰å {age}
          &lt;button onClick={() =&gt; this.setState({ age: age + 1 })}&gt;age++&lt;/button&gt;
          &lt;button onClick={() =&gt; this.setState({ age: age - 1 })}&gt;age--&lt;/button&gt;
        &lt;/div&gt;
        &lt;NewMemo age={age} count={count} /&gt;
      &lt;/div&gt;
    );
  }
}

export default Index;

</code></pre></div><h3 id="_04-forwardref"><a href="#_04-forwardref" class="header-anchor">#</a> 04. forwardRef</h3> <h4 id="åœºæ™¯ä¸€-éš”ä»£è·å–refå¼•ç”¨"><a href="#åœºæ™¯ä¸€-éš”ä»£è·å–refå¼•ç”¨" class="header-anchor">#</a> åœºæ™¯ä¸€ï¼šéš”ä»£è·å–refå¼•ç”¨</h4> <ul><li>æ­£å¸¸æƒ…å†µä¸‹ï¼šreactä¸å…è®¸ref é€šè¿‡props ä¼ é€’ï¼Œå› ä¸ºåœ¨ç»„ä»¶ä¸Šå·²ç»å¸¦æœ‰refè¿™ä¸ªå±æ€§,åœ¨ç»„ä»¶è¿›è¡Œè°ƒå’Œè¿‡ç¨‹ä¸­ï¼Œå·²ç»è¢«ç‰¹æ®Šå¤„ç†äº†ã€‚</li> <li>forwardRef å‡ºç°å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒæŠŠrefè½¬å‘åˆ°è‡ªå®šä¹‰çš„forwardRefå®šä¹‰çš„å±æ€§ä¸Šï¼Œå¯ä»¥è®©refé€šè¿‡propsè¿›è¡Œä¼ é€’</li></ul> <div class="language- extra-class"><pre class="language-text"><code>import React, { Component, forwardRef } from &quot;react&quot;;
function Son(props) {
  const { grandRef } = props;
  return &lt;div&gt;
      &lt;span ref={grandRef}&gt;Son&lt;/span&gt;
  &lt;/div&gt;;
}
class Father extends React.Component {
  constructor(props) {
    super(props);
  }

  render() {
    return &lt;Son grandRef={this.props.grandRef} /&gt;;
  }
}
const NewFather = forwardRef((props, ref) =&gt; (
  &lt;Father grandRef={ref} {...props} /&gt;
));

export default class GrandFather extends Component {
  constructor(props) {
    super(props);
  }
  node = null;
  componentDidMount() {
      console.log(this.node)
  }
  render() {
    return &lt;div&gt;
        &lt;NewFather ref={(node) =&gt; this.node = node}/&gt;
        &lt;Father/&gt;
    &lt;/div&gt;;
  }
}

</code></pre></div><h4 id="åœºæ™¯äºŒ-é«˜é˜¶ç»„ä»¶è½¬å‘ref"><a href="#åœºæ™¯äºŒ-é«˜é˜¶ç»„ä»¶è½¬å‘ref" class="header-anchor">#</a> åœºæ™¯äºŒï¼šé«˜é˜¶ç»„ä»¶è½¬å‘ref</h4> <p>ç”±äºå±æ€§ä»£ç†çš„hocï¼Œè¢«åŒ…è£¹ä¸€å±‚ï¼Œå¦‚æœæ˜¯ç±»ç»„ä»¶ï¼Œé€šè¿‡refæ‹¿ä¸åˆ°åŸå§‹ç»„ä»¶çš„å®ä¾‹çš„ï¼Œå¯ä»¥å€ŸåŠ©forWardRefè½¬å‘refæ‹¿åˆ°å¯¹åº”çš„å®ä¾‹</p> <div class="language- extra-class"><pre class="language-text"><code>import React, { Component, useRef, useEffect } from 'react'
function HOC(Comp){
    class Wrap extends Component {
        render() {
            const {forwardRef, ...otherProps} = this.props;
            return (
                &lt;Comp ref={forwardRef} {...otherProps}/&gt;
            )
        }
    }
    return React.forwardRef((props, ref) =&gt; &lt;Wrap forwardRef={ref} {...props}/&gt;)
}
class Index extends Component{
    componentDidMount(){
        console.log('hello react')
    }
    render() {
        return (
            &lt;div&gt;hello forwardRef&lt;/div&gt;
        )
    }
}
const HocIndex = HOC(Index);
export default () =&gt; {
    const node = useRef(null);
    useEffect(() =&gt; {
      console.log(node.current.componentDidMount(), '--')
    }, [])
    return &lt;div&gt;
        &lt;HocIndex ref={node}/&gt;
    &lt;/div&gt;
}

</code></pre></div><h3 id="_05-lazy"><a href="#_05-lazy" class="header-anchor">#</a> 05. lazy</h3> <p>React.lazy æ¥å—ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°éœ€è¦åŠ¨æ€è°ƒç”¨ import()ã€‚å®ƒå¿…é¡»è¿”å›ä¸€ä¸ª Promise ï¼Œè¯¥ Promise éœ€è¦ resolve ä¸€ä¸ª default export çš„ React ç»„ä»¶ã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>import React, { Component, Suspense } from 'react'
const UserInfo = React.lazy(() =&gt; new Promise((resolve)=&gt;{
  setTimeout(() =&gt; {
    resolve(import('../Component/UserInfo'))
  }, 1000)
  
}))
export default class Index extends Component {
  render() {
    return (
      &lt;Suspense fallback=&quot;loading...&quot;&gt;
        &lt;UserInfo/&gt;
      &lt;/Suspense&gt;
    )
  }
}

</code></pre></div><ul><li>import åŸç†å¦‚ä¸‹ï¼š
import() å‡½æ•°æ˜¯ç”±TS39æå‡ºçš„ä¸€ç§åŠ¨æ€åŠ è½½æ¨¡å—çš„è§„èŒƒå®ç°ï¼Œå…¶è¿”å›æ˜¯ä¸€ä¸ª promiseã€‚åœ¨æµè§ˆå™¨å®¿ä¸»ç¯å¢ƒä¸­ä¸€ä¸ªimport()çš„å‚è€ƒå®ç°å¦‚ä¸‹ï¼š</li></ul> <div class="language- extra-class"><pre class="language-text"><code>function import(url) {
    return new Promise((resolve, reject) =&gt; {
      const script = document.createElement('script');
      // toString(32) 32è¿›åˆ¶
      const tmpGlobal = &quot;__tempModuleLoadingVariable&quot;+ Math.random().toString(32).substring(2);
      script.type = &quot;module&quot;;
      script.textContent = `import * as m from &quot;${url}&quot;; window.${tmpGlobal} = m;`;
      script.onload = () =&gt; {
          resolve(window[tmpGlobal]);
          delete(window[tmpGlobal]);
          script.remove();
      }
      script.onerror = () =&gt; {
          reject(new Error(&quot;Failed to load module script with URL &quot; + url));
          delete(window[tmpGlobal]);
          script.remove();
      }
      document.documentElement.appendChild(script)
    })
}
</code></pre></div><h3 id="_06-fragment"><a href="#_06-fragment" class="header-anchor">#</a> 06. Fragment</h3> <p>ä¸å¢åŠ é¢å¤–çš„domèŠ‚ç‚¹ï¼Œèƒ½å¤Ÿè®©ä¸€ä¸ªç»„ä»¶è¿”å›å¤šä¸ªå…ƒç´ 
å†™æ³•ï¼š</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;React.Fragment&gt;&lt;/React.Fragment&gt;
æˆ–è€…
&lt;&gt;&lt;/&gt;
</code></pre></div><p>äºŒè€…åŒºåˆ«ï¼š</p> <ul><li>Fragmentæ”¯æŒkeyå…ƒç´ ï¼Œ&lt;&gt;&lt;/&gt;ä¸æ”¯æŒkeyå…ƒç´ </li></ul> <p>é€šè¿‡æˆ‘ä»¬åœ¨mapæ•°æ®æ—¶ï¼Œreactåº•å±‚ä¼šå¤„ç† é»˜è®¤åœ¨å¤–éƒ¨åµŒå¥—ä¸€ä¸ª[Fragment]æ ‡ç­¾
ä¾‹å¦‚ï¼š</p> <div class="language- extra-class"><pre class="language-text"><code> [1,3,4].map(v =&gt; &lt;span key={v}&gt;{v}&lt;/span&gt;)
 ç­‰ä»·äº
 &lt;Fragment&gt;
  &lt;span&gt;&lt;/span&gt;
  &lt;span&gt;&lt;/span&gt;
  &lt;span&gt;&lt;/span&gt;
&lt;/Fragment&gt;
</code></pre></div><h3 id="_07-profiler"><a href="#_07-profiler" class="header-anchor">#</a> 07. Profiler</h3> <p>Profiler react æ€§èƒ½å®¡æŸ¥å·¥å…·</p> <p>react æœ‰ä¸¤ä¸ªé˜¶æ®µä¸ºæˆ‘ä»¬çš„åº”ç”¨å·¥ä½œ</p> <ul><li>renderï¼šReacté€šè¿‡å°†æ¸²æŸ“ç»“æœä¸å…ˆå‰çš„æ¸²æŸ“è¿›è¡Œæ¯”è¾ƒæ¥ç¡®å®šéœ€è¦è¿›è¡Œå“ªäº›DOMæ›´æ”¹</li> <li>commitï¼šReactåº”ç”¨éœ€è¦è¿›è¡Œçš„ä»»ä½•æ›´æ”¹ã€‚ ä»DOMä¸­æ·»åŠ /åˆ é™¤å¹¶è°ƒç”¨ç”Ÿå‘½å‘¨æœŸæŒ‚é’©ï¼Œä¾‹å¦‚componentDidMountå’ŒcomponentDidUpdate</li></ul> <p>profiler DevTools æ˜¯åœ¨commit é˜¶æ®µæ”¶é›†æ€§èƒ½æ•°æ®çš„ã€‚å„æ¬¡ commit ä¼šè¢«å±•ç¤ºåœ¨ç•Œé¢é¡¶éƒ¨çš„æ¡å½¢å›¾ä¸­</p> <p>Profiler ä¸€èˆ¬æœ‰ä¸¤ä¸ªå‚æ•°ï¼š</p> <ul><li>idï¼šç”¨æ¥æ ‡è¯† Profilerçš„å”¯ä¸€æ€§</li> <li>onRenderï¼šç”¨äºæ¸²æŸ“å®Œæˆï¼Œæ¥å—æ¸²æŸ“å‚æ•°</li></ul> <p>Profiler éœ€è¦ä¸€ä¸ª onRender å‡½æ•°ä½œä¸ºå‚æ•°ã€‚ React ä¼šåœ¨ profile åŒ…å«çš„ç»„ä»¶æ ‘ä¸­ä»»ä½•ç»„ä»¶ â€œæäº¤â€ ä¸€ä¸ªæ›´æ–°çš„æ—¶å€™è°ƒç”¨è¿™ä¸ªå‡½æ•°ã€‚ å®ƒçš„å‚æ•°æè¿°äº†æ¸²æŸ“äº†ä»€ä¹ˆå’ŒèŠ±è´¹äº†å¤šä¹…ã€‚<a href="https://zh-hans.reactjs.org/docs/profiler.html" target="_blank" rel="noopener noreferrer">å®˜ç½‘<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language- extra-class"><pre class="language-text"><code>function onRenderCallback(
  id, // å‘ç”Ÿæäº¤çš„ Profiler æ ‘çš„ â€œidâ€
  phase, // &quot;mount&quot; ï¼ˆå¦‚æœç»„ä»¶æ ‘åˆšåŠ è½½ï¼‰ æˆ–è€… &quot;update&quot; ï¼ˆå¦‚æœå®ƒé‡æ¸²æŸ“äº†ï¼‰ä¹‹ä¸€
  actualDuration, // æœ¬æ¬¡æ›´æ–° committed èŠ±è´¹çš„æ¸²æŸ“æ—¶é—´
  baseDuration, // ä¼°è®¡ä¸ä½¿ç”¨ memoization çš„æƒ…å†µä¸‹æ¸²æŸ“æ•´é¢—å­æ ‘éœ€è¦çš„æ—¶é—´
  startTime, // æœ¬æ¬¡æ›´æ–°ä¸­ React å¼€å§‹æ¸²æŸ“çš„æ—¶é—´
  commitTime, // æœ¬æ¬¡æ›´æ–°ä¸­ React committed çš„æ—¶é—´
  interactions // å±äºæœ¬æ¬¡æ›´æ–°çš„ interactions çš„é›†åˆ
) {
  // åˆè®¡æˆ–è®°å½•æ¸²æŸ“æ—¶é—´ã€‚ã€‚ã€‚
}
</code></pre></div><ul><li>id: string - å‘ç”Ÿæäº¤çš„ Profiler æ ‘çš„ idã€‚ å¦‚æœæœ‰å¤šä¸ª profilerï¼Œå®ƒèƒ½ç”¨æ¥åˆ†è¾¨æ ‘çš„å“ªä¸€éƒ¨åˆ†å‘ç”Ÿäº†â€œæäº¤â€ã€‚</li> <li>phase: &quot;mount&quot; | &quot;update&quot; - åˆ¤æ–­æ˜¯ç»„ä»¶æ ‘çš„ç¬¬ä¸€æ¬¡è£…è½½å¼•èµ·çš„é‡æ¸²æŸ“ï¼Œè¿˜æ˜¯ç”± propsã€state æˆ–æ˜¯ hooks æ”¹å˜å¼•èµ·çš„é‡æ¸²æŸ“ã€‚</li> <li>actualDuration: number - æœ¬æ¬¡æ›´æ–°åœ¨æ¸²æŸ“ Profiler å’Œå®ƒçš„å­ä»£ä¸ŠèŠ±è´¹çš„æ—¶é—´ã€‚ è¿™ä¸ªæ•°å€¼è¡¨æ˜ä½¿ç”¨ memoization ä¹‹åèƒ½è¡¨ç°å¾—å¤šå¥½ã€‚ï¼ˆä¾‹å¦‚ React.memoï¼ŒuseMemoï¼ŒshouldComponentUpdateï¼‰ã€‚ ç†æƒ³æƒ…å†µä¸‹ï¼Œç”±äºå­ä»£åªä¼šå› ç‰¹å®šçš„ prop æ”¹å˜è€Œé‡æ¸²æŸ“ï¼Œå› æ­¤è¿™ä¸ªå€¼åº”è¯¥åœ¨ç¬¬ä¸€æ¬¡è£…è½½ä¹‹åæ˜¾è‘—ä¸‹é™ã€‚</li> <li>baseDuration: number - åœ¨ Profiler æ ‘ä¸­æœ€è¿‘ä¸€æ¬¡æ¯ä¸€ä¸ªç»„ä»¶ render çš„æŒç»­æ—¶é—´ã€‚ è¿™ä¸ªå€¼ä¼°è®¡äº†æœ€å·®çš„æ¸²æŸ“æ—¶é—´ã€‚ï¼ˆä¾‹å¦‚å½“å®ƒæ˜¯ç¬¬ä¸€æ¬¡åŠ è½½æˆ–è€…ç»„ä»¶æ ‘æ²¡æœ‰ä½¿ç”¨ memoizationï¼‰ã€‚</li> <li>startTime: number - æœ¬æ¬¡æ›´æ–°ä¸­ React å¼€å§‹æ¸²æŸ“çš„æ—¶é—´æˆ³ã€‚</li> <li>commitTime: number - æœ¬æ¬¡æ›´æ–°ä¸­ React commit é˜¶æ®µç»“æŸçš„æ—¶é—´æˆ³ã€‚ åœ¨ä¸€æ¬¡ commit ä¸­è¿™ä¸ªå€¼åœ¨æ‰€æœ‰çš„ profiler ä¹‹é—´æ˜¯å…±äº«çš„ï¼Œå¯ä»¥å°†å®ƒä»¬æŒ‰éœ€åˆ†ç»„ã€‚</li> <li>interactions: Set - å½“æ›´æ–°è¢«åˆ¶å®šæ—¶ï¼Œâ€œinteractionsâ€ çš„é›†åˆä¼šè¢«è¿½è¸ªã€‚ï¼ˆä¾‹å¦‚å½“ render æˆ–è€… setState è¢«è°ƒç”¨æ—¶ï¼‰( èƒ½ç”¨æ¥è¯†åˆ«æ›´æ–°æ˜¯ç”±ä»€ä¹ˆå¼•èµ·çš„,å®éªŒæ€§)ã€‚</li></ul> <h3 id="_08-strictmode"><a href="#_08-strictmode" class="header-anchor">#</a> 08. StrictMode</h3> <p>ä½œç”¨ï¼šç”¨æ¥æ£€æµ‹é¡¹ç›®ä¸­æ½œåœ¨çš„é—®é¢˜ï¼Œä¸ Fragment ä¸€æ ·ï¼Œ StrictMode ä¸ä¼šæ¸²æŸ“ä»»ä½•å¯è§çš„UI ã€‚å®ƒä¸ºå…¶åä»£å…ƒç´ è§¦å‘é¢å¤–çš„æ£€æŸ¥å’Œè­¦å‘Š</p> <div class="custom-block tip"><p class="custom-block-title">æ³¨æ„ï¼š</p> <p>ä¸¥æ ¼æ¨¡å¼æ£€æŸ¥ä»…åœ¨å¼€å‘æ¨¡å¼ä¸‹è¿è¡Œï¼›å®ƒä»¬ä¸ä¼šå½±å“ç”Ÿäº§æ„å»ºã€‚</p></div> <p>å¯ä»¥ä¸ºåº”ç”¨ç¨‹åºçš„ä»»ä½•éƒ¨åˆ†å¯ç”¨ä¸¥æ ¼æ¨¡å¼</p> <div class="language- extra-class"><pre class="language-text"><code>import React from 'react';

function ExampleApplication() {
  return (
    &lt;div&gt;
      &lt;Header /&gt;
      &lt;React.StrictMode&gt;
        &lt;div&gt;
          &lt;ComponentOne /&gt;
          &lt;ComponentTwo /&gt;
        &lt;/div&gt;
      &lt;/React.StrictMode&gt;
      &lt;Footer /&gt;
    &lt;/div&gt;
  );
}

</code></pre></div><p>StrictMode ç›®å‰æœ‰åŠ©äº</p> <ul><li>è¯†åˆ«ä¸å®‰å…¨çš„ç”Ÿå‘½å‘¨æœŸ(UNSAFE_componentWillMount, UNSAFE_componentWillReceiveProps, UNSAFE_componentWillUpdate)</li> <li>å…³äºä½¿ç”¨è¿‡æ—¶å­—ç¬¦ä¸² ref API çš„è­¦å‘Š</li> <li>å…³äºä½¿ç”¨åºŸå¼ƒçš„ findDOMNode æ–¹æ³•çš„è­¦å‘Š</li> <li>æ£€æµ‹æ„å¤–çš„å‰¯ä½œç”¨</li> <li>æ£€æµ‹è¿‡æ—¶çš„ context API</li></ul></div></div> <!----> <div class="page-edit"><!----> <div class="tags"><a href="/tags/?tag=react" title="æ ‡ç­¾">#react</a></div> <!----></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/7f8c4f/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">reactå·¥å…·API</div></a> <a href="/pages/826d29/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">reactç”Ÿå‘½å‘¨æœŸ</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        â†
        <a href="/pages/7f8c4f/" class="prev">reactå·¥å…·API</a></span> <span class="next"><a href="/pages/826d29/">reactç”Ÿå‘½å‘¨æœŸ</a>â†’
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">æœ€è¿‘æ›´æ–°</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/aiAgent/bacis/"><div>
            AgentåŸºç¡€
            <!----></div></a> <span class="date">01-13</span></dt></dl><dl><dd>02</dd> <dt><a href="/harmonyOS/state/"><div>
            ç»„ä»¶é€šä¿¡æ–¹å¼
            <!----></div></a> <span class="date">01-08</span></dt></dl><dl><dd>03</dd> <dt><a href="/harmonyOS/UIAbility/"><div>
            UIAbility
            <!----></div></a> <span class="date">01-07</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">æ›´å¤šæ–‡ç« &gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:1730129114@qq.com" title="å‘é‚®ä»¶" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/wshuhua" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/my/m/music/playlist?id=7141103351" title="å¬éŸ³ä¹" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="æœ¬ç«™ä¸»é¢˜">Vdoing</a> 
    | Copyright Â© 2022-2026
    <span>Wsh  | <a href="https://github.com/wshuhua" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="è¿”å›é¡¶éƒ¨" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="å»è¯„è®º" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="ä¸»é¢˜æ¨¡å¼" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          è·Ÿéšç³»ç»Ÿ
        </li><li class="iconfont icon-rijianmoshi">
          æµ…è‰²æ¨¡å¼
        </li><li class="iconfont icon-yejianmoshi">
          æ·±è‰²æ¨¡å¼
        </li><li class="iconfont icon-yuedu">
          é˜…è¯»æ¨¡å¼
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.e947a2e7.js" defer></script><script src="/assets/js/2.dc8a2400.js" defer></script><script src="/assets/js/54.2e5a3401.js" defer></script>
  </body>
</html>
